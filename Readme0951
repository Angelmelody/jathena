--------------------
//0964 by (凸)

・この前追加したskill_tree2.txtを廃止したので削除してください
・skill_tree.txtのフォーマットを変更＆Kalenさんなどの情報を元に転生ツリーの見直し
・それにともなってpc.cのファイル読み出し部分などを変更
・Athena雑談スレッド part3 >>14 miyaさんの指摘があるまですっかり忘れていたatcommand_athena.confの修正を同梱

	(conf/)
	atcommand_athena.conf 修正
	(db/)
	skill_tree.txt 修正
	skill_tree2.txt 廃止
	(map/)
	map.h PC_CLASS_BASE等追加
	pc.c
		pc_calc_skilltree() 修正
		pc_allskillup() 修正
		pc_readdb() 修正

--------------------
//0963 by (凸)

・@jobchange2, @jobchange3廃止 @jobchangeに引数追加 @help参照
	例: @jobchange2 10 → @jobchange 10 1
・同様に@charjob2, @charjob3廃止 @charjobに引数追加 @help参照
	例: @charjob2 10 ほげほげ → @charjob 10 1 ほげほげ
・同様にスクリプトのjobchange2, jobchange3命令廃止 jobchangeに引数追加 script_ref.txt参照
	例: jobchange2 10; → jobchange 10,1;
・↑どれも追加された引数は省略可能です。なので、転生ノービスは現状のスクリプトで転生一次職に転職できます。
	例:	Novice High → @jobchange 10 → Whitesmith
		Novice → @jobchange 10 → Blacksmith
・スクリプトから転生しているか判定するためにUpperを追加しました。Upper 0=通常, 1=転生, 2=養子
	Upper=0の時にBaseLevel=99なら転生させる〜とかそういうスクリプト誰か書いてください
	その時に元の職業は記憶していないので永続変数とかで覚えさせて判定させないと転生後何にでも転職できちゃう？
・バイオプラントとスフィアマインで呼び出されるMobの名前を--ja--にしてmob_db.txtから読むようにした

	(conf/)
	help.txt 修正
	(db/)
	const.txt
	(doc/)
	help.txt 修正
	script_ref.txt 修正
	(map/)
	atcommand.c
		atcommand_jobchange() 修正
		atcommand_jobchange2() 削除
		atcommand_jobchange3() 削除
		atcommand_character_job() 修正
		atcommand_character_job2() 削除
		atcommand_character_job3() 削除
	map.h 修正
	pc.c
		pc_readparam() 修正
		pc_jobchange() 修正
	pc.h 修正
	script.c
		buildin_jobchange() 修正
		buildin_jobchange2() 削除
		buildin_jobchange3() 削除
	skill.c
		skill_castend_pos2() 修正

--------------------
//0962 by (凸)

・職業は0〜23で処理したいので転生職用のスキルツリー追加、eAthenaを参考に拡張
	っていうか韓国本サーバでの実装の資料が見当たらないので適当
・sakexe.exeを解析してskill_db.txt変更、これもeAthenaを参考に拡張
	どれが本サーバで実装されているスキルか分かりませんっ！！
※スキルツリーが表示されたからといって使えるわけじゃありませんっ！！

	(common/)
	mmo.h 定数修正
	(db/)
	skill_db.txt 変更
	skill_require_db.txt 変更
	skill_tree2.txt 追加
	(map/)
	skill.h 定数修正
	pc.c
		pc_calcstatus() 修正
		pc_allskillup() 修正
		pc_calc_skilltree() 修正
		pc_readdb() 修正
	
--------------------
//0961 by 胡蝶蘭

・スクリプトにサブルーチン/ユーザー定義関数機能追加
	詳しくはサンプルとscript_ref.txtを読んでください。
	地味に大改造なので、スクリプト関係でバグがあるかもしれません。
	
	(map/)
	map.h/map.c
		struct map_session_data にスクリプト情報退避用のメンバ追加
		map_quit()修正
	script.h/script.c
		色々修正(run_script(),run_func()が主)
	npc.c
		npc_parse_function()追加他
	(conf/sample)
	npc_test_func.txt
		ユーザー定義関数/サブルーティンのテストスクリプト
	(doc/)
	script_ref.txt
		サブルーティンなどの説明追加

--------------------
//0960 by (凸)
・本鯖相違スレッド part2 >>62 KKさんのアンクルスネア修正を同梱
・バグ報告スレッド part5 >>14-16 rbさんのバグ修正を同梱
・For English User Forum >>15 Mugendaiさんの指摘で0x1d7を使うのはVal>255に修正(0xc3のValは1バイトだから0x1d7を使うのかと納得)
・pc_calc_base_job()を変更して元jobだけでなくノビか一次職か二次職(type)、通常か転生か養子(upper)を返すようにした

	(map/)
	atcommand.c
		atcommand_joblevelup() 修正
		atcommand_character_joblevel() 修正
	clif.c
		clif_changelook() 修正
	pc.h 修正
	pc.c
		pc_setrestartvalue() 修正
		pc_equippoint() 修正
		pc_isequip() 修正
		pc_calc_skilltree() 修正
		pc_calcstatus() 修正
		pc_isUseitem() 修正
		pc_calc_base_job() 修正
		pc_allskillup() 修正
		pc_damage() 修正
		pc_jobchange() 修正
		pc_equipitem() 修正
	script.c
		buildin_changesex() 修正
	skill.c
		skill_castend_nodamage_id() 修正
		skill_unit_onplace() 修正
		
--------------------
//0959 by (凸)
・help.txtがdocじゃなくてconfのが読み出されてた＿|￣|○
・gamejokeを参考に転生二次職のステータス加重値をjob_db2-2.txtに記述
・スクリプトにjobchange2とjobchange3を追加それぞれ転生職と養子職へ転職させる命令です

	(conf/)
	help.txt 修正
	(db/)
	job_db2.txt 修正
	job_db2-2.txt 追加
	(doc/)
	help.txt 修正
	script_ref.txt 修正
	(map/)
	pc.c
		pc_calcstatus() 修正
		pc_readdb() 修正
	script.c
		buildin_jobchange() 修正
		buildin_jobchange2() 追加
		buildin_jobchange3() 追加

--------------------
//0958 by (凸)
・転生職方面の実装を色々
・重量制限は良く分からないので元の職業の値をそのまま使っています(モンク＝チャンピオン等)
・装備品も同上、HPやSPのテーブルも同上なので、転生してもHPなどが増えないガッカリ仕様です

	(map/)
	atcommand.c
		atcommand_joblevelup() 修正
		atcommand_character_joblevel() 修正
	pc.c
		pc_setrestartvalue() 修正
		pc_equippoint() 修正
		pc_isequip() 修正
		pc_calcstatus() 修正
		pc_isUseitem() 修正
		pc_calc_base_job() 追加
		pc_damage() 修正
		pc_jobchange() 修正
		pc_equipitem() 修正
	pc.h 修正
	script.c
		buildin_changesex() 修正
	skill.c
		skill_castend_nodamage_id() 修正

--------------------
//0957 by (凸)
・@charjob2と@charjob3を追加、関係としては@charjob⇔@jobchange、@charjob2⇔@jobchange2、(ry
・@mapexitを追加、map-serverを落とすコマンドですatcommand_athena.confでは99設定にされてますので使用には十分注意してください。

	(map/)
	atcommand.c
		atcommand_character_job2() 追加
		atcommand_character_job3() 追加
	atcommand.h 修正
	(conf/)
	atcommand_athena.conf 修正
	(doc/)
	help.txt 修正

--------------------
//0956 by (凸)
・転生職仮実装(@jobchange2)、見た目と経験値テーブルだけです
・養子職仮実装(@jobchange3)、見た目だけです現状では経験値は転生二次職と同じというマゾ仕様
※上記2点は転生職が実装されているクライアントでなければ実行するとエラー落ちするので注意！！
　その後直接セーブデータを弄らないとキャラセレにも行けなくなります！！
・Athena雑談スレッド part2 >>149 稀枝さんの報告を元にガーディアンを修正
・砦以外でガーディアンとかエンペリウムを殴るとmap-serverが落ちていたのも修正(未確認)
・スパノビのJobテーブルはFor English User Forum >>13 kingboさんのデータを元に修正
・転生職の経験値テーブルはOWNを参照してBase99の経験値は不明だったので適当に設定

	(map/)
	atcommand.c
		atcommand_jobchange() 修正
		atcommand_jobchange2() 追加
		atcommand_jobchange3() 追加
	atcommand.h 修正
	clif.c
		clif_changelook() 修正
	pc.c
		pc_nextbaseexp() 修正
		pc_nextjobexp() 修正
		pc_jobchange() 修正
		pc_readdb() 修正
	battle.c
		battle_calc_damage() 修正
		mob_can_reach() 修正

--------------------
//0955 by huge
・ペットのルート機能。
  ・仕様はmobのルートに近い感じですが、射程を短くしてます。
  ・拾ったアイテムは、パフォーマンスをすると床に落とします。
  ・卵に戻したり、ログオフしたときはPCの手元に入るようにしました。(重量超過はドロップ)
  ・拾える個数はルートmob同様の10個ですが、11個目は拾いに行きません。
  ・ルート権の問題から、アイテムにfirst_idが入っていて、それが飼い主以外だったら、何秒経とうと拾いません。(未確認)
  ・それと、荷物持ちにされると可哀想なので、重量制限もつけました。これはconfで設定可能です。
・atcommandで、@whereがうまく働いてなかったので修正(またウチだけかなぁ･･･）
・@memoでmemoする時は、mapflagを無視するように。
・スフィアマインの名前だけ修正。

	(conf/)
	battle_athena.conf
		pet_lootitem,pet_weight 追加
	(doc/)
	conf_ref.txt 修正
	(map/)
	atcommand.c
		atcommand_memo() 修正
		atcommand_where() 修正
	battle.c
		battle_config_read() 修正
	battle.h 修正
	map.c
		map_quit() 修正
	map.h
		pet_data{} 修正
	pc.c
		pc_memo() 修正
	pet.c
		pet_performance() 修正
		pet_return_egg() 修正
		pet_data_init() 修正
		pet_ai_sub_hard() 修正
		pet_lootitem_drop() 追加
		pet_delay_item_drop2() 追加
		pet_ai_sub_hard_lootsearch() 追加
	pet.h 修正
	skill.c
		skill_castend_pos2() 修正

--------------------
//0954 by (凸)
・object_del.batで各server.exeも削除するようにした
・For English User Forum >>11 kingboさんの修正を取り込み
・バグ報告スレッド part5 >>10 Sinさんの修正を取り込み
・ついでに見かけたatcommand_character_joblevelの不具合を修正
・@コマンドでジョブレベルを上げるときにスパノビはJob70まで対応(未確認)

	(/)
	object_del.bat 修正
	(map/)
	atcommand.c
		atcommand_joblevelup() 修正
		atcommand_character_joblevel() 修正
		atcommand_character_baselevel() 修正

	code by kingbo 2004/4/29 PM 06:15
	base on 0953
	now i sure it works well
	(map/)
	mob.c
		mob_can_reach() fix

--------------------
//0953 by (凸)
・mob_skill_db.txtの条件値に0以外入っていなかったのを訂正
・gcc 2.95でコンパイルできるように訂正(by バグスレpart5 >>2 茜さん)
・↑やLinuxなどを考慮してstartやMakefileなどの改行をLFに変更
・0952で出たコンパイル警告を出ないように修正
・0952で更新されなかったconf_ref.txtを修正

	(/)
	start 改行コード変更
	athena-start 改行コード変更
	(db/)
	mob_skill_db.txt 修正
	(doc/)
	conf_ref.txt 修正
	(login/)
	Makefile 改行コード変更
	(map/)
	Makefile 改行コード変更
	atcommand.c
		atcommand() 宣言位置修正
		atcommand_where() 宣言位置修正
	battle.c 
		battle_calc_pet_weapon_attack() 修正
		battle_calc_mob_weapon_attack() 修正
		battle_calc_pc_weapon_attack() 修正
		battle_calc_magic_attack() 修正
	clif.c
		clif_skill_fail() 宣言位置修正
	guild.c
		guild_gvg_eliminate_timer() 宣言位置修正
	mob.c
		mob_damage() 宣言位置修正
	script.c
		buildin_deletearray() 宣言位置修正
		buildin_getequipcardcnt() 宣言位置修正
		buildin_successremovecards() 宣言位置修正

--------------------
//0952 by CG
・confでDEFとMDEFの計算方法を選択できるように。

	(conf/)
	battle_athena.conf 変更
	(map/)
	battle.c 
		battle_calc_pet_weapon_attack() 修正
		battle_calc_mob_weapon_attack() 修正
		battle_calc_pc_weapon_attack() 修正
		battle_calc_magic_attack() 修正
	battle.h 修正

--------------------
//0951 by (凸)
・サーバーsnapshot
・バグ報告スレッド part4 >>95 KAJIKENさんの修正を同梱
・同 >>138 バグかな？さんの修正を同梱
・Athena雑談スレッド part2 >>112 名無しさんのPVPナイトメアモードのアンダークロスマップワープポイントを同梱
・同 >>96 稀枝さんのnpc_gldcheck.txtを同梱
・スナップショットにsave/を入れるのをやめました。無い場合はathena-startが作ってくれます
・athena-startでlog/が無い場合に作るように変更
・その他？

	(/)
	athena-start 変更
	(db/)
	mob_db.txt 変更
	(conf/)
	map_athena.conf 変更
	(conf/extension/)
	npc_gldcheck.txt 追加
	(conf/npc/)
	npc_event_ice.txt 変更
	npc_job_alchemist.txt 変更
	npc_event_valentine.txt 変更
	npc_town_geffen.txt 変更
	npc_event_whiteday.txt 変更
	npc_event_potion.txt 変更
	npc_town_comodo.txt 変更
	(conf/warp/)
	npc_warp_pvp.txt 追加

--------------------

//0950以前の変更点はReadmeを参照してください

--------------------

    Athena Dev. v2.1.1       Released: Middle July, 2003
    (c) 2003 Athena Project.
     http://project-yare.de/

1. Athena(アテナ)について
2. このリリースについて
3. 必要な物
4. 使い方
5. 現在の仕様
6. 祝辞
7. 免責事項
8. 募集
9. English


1. アテナについて
    アテナとは2003年1月半ばにでた0052.lzhをベースとして作られているエミュレータの一つです。
    基本的なライセンスはオリジナルがGPLの下に配布されている為、
    これに従いGPLの下配布を許可します。
    /*
        改良版を配布する場合は必ずこのREADMEを書き換えてください。
        何処を改良したのか報告(athena@project-yare.deまで)して貰えると助かります。
        バイナリのみの配布はGPL違反ですので"必ず"ソースも添付してください。
     */
    動作の確認は以下の通りのみ行っています。
    // ただし完璧に動く事を保証するものでありません
    対象CPU: Intel Pentium系   // PentiumII以上で確認.
        FreeBSD 4.8R, 4.6.2R
        Linux RedHat 7.3
        cygwin + gcc 3.2 20020927 (prerelease)
    開発元URL: http://project-yare.de/


2. このリリースについて
    今回のリリースは前回(V2.1)同様開発版のリリースのみです。
    2.1に比べ下記の点が修正されています。
        mapのデフォルト設定が韓国data.grfのみ正常に動作するようになっていた点
        common/timer.cやmap/script.cの幾つかのバグ

    迅速にUpdateを強く推奨するものではありませんが各自の判断で行って下さい。


3. 必要な物
    data.grf      //sdata.grfは必要に応じて
    account.txt   //存在しない場合athena.shが自動生成します
    conf/*.cnf    //Map用とChar用の二種類あります
    conf/npc*.txt //npc設定用ファイルです。複数のファイルに分けることが可能です。
    db/*.txt      //アイテム、job情報など


4. 使い方
    > tar xvfz athena-d?.?.tar.gz
    > cd athena-d?.?.tar.gz
    > make
    > vi conf/char_athena.cnf       //IP(127.0.0.1)の部分を環境に合わせて変更してください
    > vi conf/map_athena.cnf        //同上、またmap設定などは、このファイルで行います。
    > ./athena.sh
    上記を行えば"たぶん"起動します。

    補足:
    conf/npc_sampleJ.txtにはスクリプトの書き方について色々な説明が記載されています。
    もし、独自のMap設定を行ってみたい人や、スクリプトを弄りたい方は参考にしてください。
    ただし、開発中のためスクリプトの仕様が変更される可能性が高いです。
    command.txtには実装済みの特殊コマンドについての説明を記載しています。


5. 現在の仕様
    本鯖と比べておかしい(例えばプバが歩く、ポリンがアイテムを拾わないなど)点は、
    全て現在開発中に因るものです。
    現状としてキャラクタ系及びモンスター系のバグ報告は無視される可能性が高いです。

    バグ報告について必ず発生条件をお書き下さい。
    下にある報告用テンプレートを使って報告して頂くと助かります。
    報告先はエミュ板の開発スレにでも。
    ---- Athena v 2.0 (stable or develop) ----
    【gcc ver】gcc -vを実行時に表示される内容
    【動作システム】FreeBSD, Linux(ディストリビュージョンも), cygwinなど
    【発生内容】mapが落ちてしまった時の表示されていたデバッグ情報など具体的に書いてください。
    【操作内容】具体的にどんな操作を行ったかを書いてください。
    ------------------ END -------------------
    理想はテンプレに加えてmap.coreなどcoreファイルをUploaderにアップして頂くことですが
    問題のMapだけの状態にしcoreの吐く容量に注意してください。
    /*
        確認した限りでは324個ほどmapデータを読み込ませると、
         40MB近いcoreファイルを吐き出します @FreeBSD
         cygwinの場合はstackdumpというファイルになるそうです。
        しかし、coreファイルなどをgzip圧縮などすれば大幅に小さくなります。
         大凡30MBのcoreファイルが2.9MBほどになるようです。
        ですので、もしアップロードする場合はgzip圧縮など各自行ってください。
     */

    今回のリリースだけでなくHISTORYを作成すると大量に記述が必要な為省略しています。
    // 多い日だと本当に結構ありますので‥‥。


6. 祝辞
    今回このAthena開発版を出すに当たって感謝したい方々(順番不同)
        Lemming氏 (Project YARE)
        0052氏 (Uploader)
        35氏 (エミュ開発スレ)
        Johan Lindh氏(Author of memwatch)
        YARE forumのNPC情報を作成した方々
        weiss研究会BBSの様々な情報ファイルを作成した方々
        最後に、.coreファイル達


7. 免責事項
    Athena Projectは一切Athenaの動作に関する保証等は行いません。
    つまり、Athenaは無保証です。
    athena@project-yare.deに動作・操作等に関する質問などを送られても一切お答えできません。
    又Athenaを用いたことにより生じた被害・問題等の責任は一切Athena Projectは負いません。


8. 募集
    athenaの開発に参加したい//興味があるという方ご連絡下さい。
    我々は貴方の参加をお待ちしています。
    // 最新版が欲しいだけで何ら協力して頂けないという方はお断りです;-)
    [募集要項: プログラマ(2-3人)]
        年齢: 不問
        性別: 不問
        言語: 日本語が理解可能
        内容: C言語もしくはC++による開発。(特にネットワークやDBの経験が有る方大募集!)
    [募集要項: 翻訳(?人)]
        年齢: 不問
        性別: 不問
        言語: 日本語、英語が理解可能
        内容: 仏蘭西語、独逸語、西班牙語、伊太利亜語、泰(タイ)語、朝鮮語、中国語へ文献、サイトなどの翻訳
    連絡先: athena@project-yare.de 雑務担当まで。


9. English
     This release is just fixed some bugs in timer.c, script.c and map_athena1.conf.


(c) 2003 Athena Project.
